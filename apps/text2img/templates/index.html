{% extends "base.html" %}
{% block content %}
  <div style="text-align: center; margin-bottom: 30px;">
    <a href="../" style="display: inline-block; background: var(--acc); color: #0a0c12; padding: 15px 30px; text-decoration: none; border-radius: 20px; font-weight: bold; font-size: 16px; box-shadow: 0 5px 15px rgba(122, 162, 255, 0.4); transition: all 0.3s ease; margin-right: 10px;" onmouseover="this.style.filter='brightness(1.1)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.filter='brightness(1)'; this.style.transform='translateY(0px)'">← Back to Main Page</a>
    <a href="{{ url_for('gallery') }}" style="display: inline-block; background: rgba(255, 255, 255, 0.2); color: white; padding: 15px 30px; text-decoration: none; border-radius: 20px; font-weight: bold; font-size: 16px; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.transform='translateY(0px)'">🖼️ My Gallery</a>
  </div>
  <h1>Text → Images</h1>
  <p class="muted">Generate images from text using OpenAI's DALL·E (gpt-image-1). Your results are saved to <span class="tag">/static/generated</span>.</p>

  <form action="{{ url_for('generate') }}" method="post">
    <label for="prompt">Prompt</label>
    <input type="text" id="prompt" name="prompt" placeholder="A mystical library under the stars, watercolor" value="{{ prompt or '' }}" required>

    <div class="row">
      <div>
        <label for="size">Size</label>
        <select id="size" name="size">
          {% set sizes = ["1024x1024", "1024x1792", "1792x1024", "512x512"] %}
          {% for s in sizes %}
            <option value="{{ s }}" {% if size == s %}selected{% endif %}>{{ s }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label for="n">Count</label>
        <select id="n" name="n">
          {% for i in range(1,7) %}
            <option value="{{ i }}" {% if n == i %}selected{% endif %}>{{ i }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <button type="submit">Generate</button>
  </form>

  {% if generated %}
    <h2 style="margin-top:20px;">Results</h2>
    <div class="grid">
      {% for img in generated %}
        <div class="thumb">
          <img src="{{ img }}" alt="Generated image">
          <div class="actions">
            <a href="{{ img }}" target="_blank" class="tag">Open</a>
            <a href="{{ img }}" download class="tag">Download</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}

{% endblock %}
